# Plan 07-03: Audit Investigation Endpoints

## Objective
Verify investigation-related endpoints return proper related data

## Scope
Audit only - document findings for Phase 10 fixes

---

## Tasks

### Task 1: Audit Interviews Endpoint
**Files**: `apps/web/src/app/api/interviews/route.js`, `apps/web/src/app/api/interviews/[id]/route.js`

- [ ] Check if incident data is joined
- [ ] Check if employee data is joined
- [ ] Verify primary vs witness interview distinction
- [ ] Document interviewee_name, interviewee_role population
- [ ] Check what fields are returned

### Task 2: Audit Evidence Endpoint
**Files**: `apps/web/src/app/api/evidence/route.js`

- [ ] Check if uploaded_by employee name included
- [ ] Check if incident context included
- [ ] Document what fields are returned
- [ ] Note any missing relations

### Task 3: Audit Corrective Actions Endpoint
**Files**: `apps/web/src/app/api/corrective-actions/route.js`

- [ ] Check if assigned_to employee name included
- [ ] Check if incident context included
- [ ] Document status field and values
- [ ] Note any missing relations

### Task 4: Document Witness Relationship Pattern
**Files**: `apps/web/src/app/api/interview-witnesses/route.js`, `apps/web/src/app/api/root-cause/route.js`

- [ ] How are witnesses linked to interviews?
- [ ] Is this only handled in dossier endpoint?
- [ ] Document root cause endpoint structure
- [ ] Note any orphaned relationship patterns

---

## Files to Read

```
apps/web/src/app/api/interviews/route.js
apps/web/src/app/api/interviews/[id]/route.js
apps/web/src/app/api/evidence/route.js
apps/web/src/app/api/corrective-actions/route.js
apps/web/src/app/api/root-cause/route.js
apps/web/src/app/api/interview-witnesses/route.js
```

## Files to Modify
None (audit only - creates SUMMARY.md)

---

## Verification
- [ ] Interviews endpoint audited
- [ ] Evidence endpoint audited
- [ ] Corrective actions endpoint audited
- [ ] Witness relationship pattern documented
- [ ] SUMMARY.md created with findings
