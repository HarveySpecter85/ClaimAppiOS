# Plan 07-02: Audit Form-Related Endpoints

## Objective
Verify 8 form type endpoints return (or lack) related data

## Scope
Audit only - document findings for Phase 10 fixes

---

## Tasks

### Task 1: Audit Form GET Endpoints for JOINs
**Files**: All 8 form route files

- [ ] benefit-affidavits: Check for incident JOIN
- [ ] mileage-reimbursements: Check for incident/employee JOIN
- [ ] trip-entries: Check for reimbursement JOIN
- [ ] prescription-cards: Check for incident JOIN
- [ ] medical-authorizations: Check for incident JOIN
- [ ] refusal-of-treatments: Check for incident JOIN
- [ ] modified-duty-policies: Check for incident JOIN
- [ ] status-logs: Verify existing JOINs work correctly

### Task 2: Check Form Context Requirements
**Analysis**: What related data do forms need?

- [ ] Do mobile form screens need incident details?
- [ ] Do forms display employee information?
- [ ] Document what context is required vs missing

### Task 3: Document Mileage â†’ Trip Entries Relationship
**Files**: `apps/web/src/app/api/mileage-reimbursements/route.js`, `apps/web/src/app/api/trip-entries/route.js`

- [ ] Are trip entries included in mileage GET response?
- [ ] Or must client fetch separately?
- [ ] Document relationship loading pattern

### Task 4: Create Phase 10 Recommendations
**Output**: Priority list of JOIN additions

- [ ] List forms that need JOINs by priority
- [ ] Document mobile app impact for each
- [ ] Note any patterns that could be standardized

---

## Files to Read

```
apps/web/src/app/api/benefit-affidavits/route.js
apps/web/src/app/api/mileage-reimbursements/route.js
apps/web/src/app/api/trip-entries/route.js
apps/web/src/app/api/prescription-cards/route.js
apps/web/src/app/api/medical-authorizations/route.js
apps/web/src/app/api/refusal-of-treatments/route.js
apps/web/src/app/api/modified-duty-policies/route.js
apps/web/src/app/api/status-logs/route.js
```

## Files to Modify
None (audit only - creates SUMMARY.md)

---

## Verification
- [ ] All 8 form endpoints audited
- [ ] JOIN status documented for each
- [ ] Mileage/trip relationship documented
- [ ] Phase 10 recommendations created
- [ ] SUMMARY.md created with findings
