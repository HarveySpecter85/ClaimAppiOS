# Plan 06-01: Audit Form Submission Workflow

## Objective
Verify all claim form types submit correctly with proper validation

## Scope
Audit only - document findings for Phase 10 fixes

---

## Tasks

### Task 1: Audit Each Form Type's POST Endpoint
**Files**: All form route.js files

- [ ] Benefit Affidavits: Verify incident_id linkage, required fields, signature
- [ ] Mileage Reimbursements: Verify incident_id, trip entries relationship
- [ ] Prescription Cards: Verify incident_id, required fields
- [ ] Medical Authorizations: Verify incident_id, consent fields
- [ ] Refusal of Treatment: Verify incident_id, acknowledgment
- [ ] Modified Duty Policies: Verify incident_id, decision workflow
- [ ] Status Logs: Verify employee_id/incident_id, weekly tracking
- [ ] Trip Entries: Verify reimbursement_id linkage

### Task 2: Audit Draft/Submit Workflow
**Focus**: Status transitions

- [ ] Verify draft saving works (status = "draft")
- [ ] Verify submit transitions correctly (status = "submitted")
- [ ] Document validation gaps (missing required field checks)
- [ ] Note: no enum validation on status values

### Task 3: Document Mobile Submission Flow
**Focus**: Offline support

- [ ] Check if mobile forms exist for each type
- [ ] Verify offline queue support
- [ ] Document sync behavior

---

## Files to Read

```
apps/web/src/app/api/benefit-affidavits/route.js
apps/web/src/app/api/mileage-reimbursements/route.js
apps/web/src/app/api/prescription-cards/route.js
apps/web/src/app/api/medical-authorizations/route.js
apps/web/src/app/api/refusal-of-treatments/route.js
apps/web/src/app/api/modified-duty-policies/route.js
apps/web/src/app/api/status-logs/route.js
apps/web/src/app/api/trip-entries/route.js
```

## Files to Modify
None (audit only - creates SUMMARY.md)

---

## Verification
- [ ] All 8 form types audited
- [ ] incident_id linkage verified for each
- [ ] Draft/submit workflow documented
- [ ] Validation gaps documented
- [ ] SUMMARY.md created with findings
