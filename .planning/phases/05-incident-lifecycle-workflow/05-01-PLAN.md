# Plan 05-01: Audit Incident Creation and Assignment

## Objective
Verify incident creation and employee assignment workflow

## Scope
Audit only - document findings for Phase 10 fixes

---

## Tasks

### Task 1: Audit Incident Creation API
**Files**: `apps/web/src/app/api/incidents/route.js`, `apps/web/src/app/api/incidents/[id]/route.js`

- [ ] Verify POST creates with employee_id assignment
- [ ] Verify status defaults to "open"
- [ ] Document incident_number generation (random 1000-9999)
- [ ] Document collision risk (only 9000 possible values)
- [ ] Check field validation for required fields

### Task 2: Audit Mobile Creation Flow
**Files**: `apps/mobile/src/app/(tabs)/new-incident.jsx`

- [ ] Verify 5-step creation process
- [ ] Document: employee selection → details → analysis → location → submit
- [ ] Note sync behavior with backend

### Task 3: Document Status Values and Transitions
**Files**: `apps/web/src/app/api/dashboard/stats/route.js`

- [ ] Document current values: open, draft, submitted, approved, rejected
- [ ] Document: no "resolved" or "closed" status exists
- [ ] Document: no state machine for valid transitions
- [ ] Create recommendations for Phase 10

---

## Files to Read

```
apps/web/src/app/api/incidents/route.js
apps/web/src/app/api/incidents/[id]/route.js
apps/mobile/src/app/(tabs)/new-incident.jsx
apps/web/src/app/api/dashboard/stats/route.js
```

## Files to Modify
None (audit only - creates SUMMARY.md)

---

## Verification
- [ ] Incident creation flow documented
- [ ] Mobile flow documented
- [ ] Status values and gaps documented
- [ ] SUMMARY.md created with findings
